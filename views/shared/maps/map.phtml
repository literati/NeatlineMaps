<?php 
echo js('proj4js/proj4js-compressed');
echo js('OpenLayers-2.8/lib/OpenLayers');
echo js('maps/show/show');
?>

<script type="text/javascript"><?php echo $params['proj4js'] ?></script>
<script type="text/javascript">
	
//<!--
	<?php foreach ($params as $name => $value) {
			echo "$name = '$value';"	;
			$layers = $params['layers'];
		}
		?>backgroundlayers = new Array();<?php
		foreach (array_keys($layers) as $layername) {
			$layerinfo = $layers[$layername];
		  	?>
		  	backgroundlayers.push(
				  	new OpenLayers.Layer.WMS('<?php echo $layerinfo[1]; ?>' , '<?php echo $layerinfo[0];?>', {layers: '<?php echo $layername; ?>'})
				  	);
		  	<?php 
	 	 } 	
		?>
		bbox = new OpenLayers.Bounds(minx,miny,maxx,maxy);

		if (typeof (Omeka) == 'undefined') {
			Omeka = new Object();
		}

		if (!Omeka.NeatlineMaps) {
			Omeka.NeatlineMaps = new Array();
		}
		mapdiv = "map" + Omeka.NeatlineMaps.length;
		$('tmp').id = mapdiv;		
//-->

</script>

<link rel="stylesheet" href="<?php echo css('neatline'); ?>" />

<div id="tmp" class="themap"></div>

<script text="text/javascript">
	Event.observe(window, 'load', init );
</script>